// Generated by CoffeeScript 1.8.0
L.Control.WXTileColorBar = L.Control.extend({
  options: {
    position: 'bottomright',
    size: 'small',
    orientation: 'horiz'
  },
  initialize: function(config, options) {
    this._config = config;
    this.setField(this._config.fields[0]);
    return L.Control.prototype.initialize.call(this, options);
  },
  onAdd: function(map) {
    var container;
    this._map = map;
    this._map.on('wxfieldchange', this._fieldChange, this).on('wxfieldremove', this._fieldRemove, this);
    container = L.DomUtil.create('div', 'leaflet-control-colorbar');
    this._img = L.DomUtil.create('img', 'leaflet-control-colorbar-img', container);
    this.redraw();
    return container;
  },
  onRemove: function(map) {
    return this._map.off('wxfieldchange', this._fieldChange, this).off('wxfieldremove', this._fieldRemove, this);
  },
  setField: function(field) {
    this._field = field;
    return this.redraw();
  },
  getField: function() {
    return this._field;
  },
  _fieldChange: function(field) {
    return this.setField(field);
  },
  _fieldRemove: function() {
    return this.setField(null);
  },
  redraw: function() {
    if (this._img == null) {
      return;
    }
    if (!this._field) {
      return this._img.style.display = 'none';
    } else {
      this._img.style.display = 'inline';
      return this._img.src = "" + this._config.url + "colorbar/" + this._field.name + "/" + this.options.size + "/" + this.options.orientation;
    }
  }
});

L.control.wxTileColorBar = function(config, options) {
  return new L.Control.WXTileColorBar(config, options);
};
